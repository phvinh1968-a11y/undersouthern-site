<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>catalog management — global record label</title>
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/phvinh1968-a11y/my-images/main/logoblack.png">

    <style>
        :root {
            --bg: #f4f4f2; 
            --sidebar-bg: #ecece9;
            --card-bg: #ecece9;
            --text-main: #1a1a1a;
            --text-secondary: #6b6b6b;
            --line: #dcdcdc;
            --accent: #000000;
            --sidebar-width: 280px;
            --footer-height: 60px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { box-sizing: border-box; -webkit-font-smoothing: antialiased; }

        body {
            font-family: -apple-system, blinkmacsystemfont, "inter", sans-serif;
            background-color: var(--bg); color: var(--text-main);
            margin: 0; display: flex; height: 100vh; text-transform: lowercase;
            letter-spacing: -0.01em; overflow: hidden;
        }

        body::before {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("https://grainy-gradients.vercel.app/noise.svg");
            opacity: 0.03; pointer-events: none; z-index: 999;
        }

        aside {
            width: var(--sidebar-width); border-right: 1px solid var(--line);
            display: flex; flex-direction: column; padding: 60px 0;
            background: var(--sidebar-bg); z-index: 10; flex-shrink: 0;
        }

        .brand-logo { width: 140px; margin: 0 auto 80px auto; cursor: pointer; }
        .brand-logo img { width: 100%; height: auto; display: block; }

        nav { display: flex; flex-direction: column; gap: 32px; width: 100%; padding: 0 45px; }
        nav a {
            text-decoration: none; color: var(--text-secondary);
            font-size: 0.85rem; font-weight: 500; transition: var(--transition);
            display: flex; align-items: center; gap: 12px; position: relative; cursor: pointer;
        }
        nav a::before {
            content: ""; width: 6px; height: 6px; background-color: var(--accent);
            border-radius: 50%; position: absolute; left: -15px; opacity: 0; transition: var(--transition);
        }
        nav a.active::before { opacity: 1; }
        nav a.active { color: var(--accent); transform: translatex(6px); }

        .logout-container { margin-top: auto; padding: 0 45px; }
        .logout-btn { color: #b3261e; background: none; border: none; cursor: pointer; font-size: 0.85rem; text-transform: lowercase; }

        .wrapper { flex-grow: 1; display: flex; flex-direction: column; height: 100vh; position: relative; }
        main { 
            flex-grow: 1; padding: 60px 80px; overflow-y: auto; 
            padding-bottom: calc(var(--footer-height) + 40px); 
        }

        header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 50px; }
        .header-title h1 { font-size: 1.2rem; font-weight: 500; margin: 0 0 8px 0; }
        .header-title span { font-size: 0.85rem; color: var(--text-secondary); }

        .catalog-stats { display: flex; gap: 40px; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid var(--line); }
        .stat-item { display: flex; flex-direction: column; gap: 4px; }
        .stat-item b { font-size: 1.1rem; font-weight: 500; }
        .stat-item span { font-size: 0.65rem; color: var(--text-secondary); text-transform: lowercase; }

        .toolbar { display: flex; margin-bottom: 20px; width: 100%; }
        .search-wrapper { position: relative; width: 350px; border-bottom: 1px solid var(--line); display: flex; align-items: center; transition: 0.3s; }
        .search-wrapper:focus-within { border-bottom-color: var(--accent); }
        
        .search-box { 
            flex-grow: 1; background: transparent; border: none; 
            padding: 10px 0; outline: none; font-size: 0.82rem; 
            font-family: inherit; color: var(--text-main);
            text-transform: lowercase;
        }
        
        .clear-search {
            font-size: 14px; color: var(--text-secondary); cursor: pointer;
            padding: 0 10px; display: none; opacity: 0.6; transition: 0.2s;
        }
        .clear-search:hover { opacity: 1; color: var(--accent); }
        .search-icon { font-size: 0.8rem; color: var(--text-secondary); padding-right: 5px; opacity: 0.7; }

        .catalog-table { width: 100%; border-collapse: collapse; }
        .catalog-table thead th { 
            text-align: left; font-size: 0.62rem; color: var(--text-secondary); 
            font-weight: 700; text-transform: lowercase;
            padding: 15px; border-bottom: 1px solid var(--line); 
        }
        .catalog-table tbody tr { border-bottom: 1px solid rgba(0,0,0,0.05); transition: 0.2s; }
        .catalog-table tbody tr:hover { background: rgba(236, 236, 233, 0.5); }
        .catalog-table td { padding: 20px 15px; font-size: 0.85rem; vertical-align: middle; }

        .artwork-cell { display: flex; align-items: center; gap: 15px; }
        .img-wrap { width: 48px; height: 48px; border-radius: 2px; overflow: hidden; border: 1px solid var(--line); background: #fff; }
        .img-wrap img { width: 100%; height: 100%; object-fit: cover; }
        .info-stack { display: flex; flex-direction: column; gap: 2px; }
        .info-stack b { font-size: 0.92rem; color: var(--accent); font-weight: 600; }
        .info-stack span { font-size: 0.7rem; color: var(--text-secondary); }

        .credit-stack { display: flex; flex-direction: column; gap: 4px; max-width: 300px; }
        .credit-stack .artist-list { font-size: 0.85rem; color: var(--text-main); font-weight: 500; line-height: 1.4; }
        .credit-stack .artist-list b { color: var(--accent); font-weight: 700; }
        .credit-stack .role { font-size: 0.68rem; color: var(--text-secondary); opacity: 0.8; line-height: 1.4; }

        .status-dot { width: 7px; height: 7px; border-radius: 50%; display: inline-block; margin-right: 8px; }
        .status-pending { background: #ef6c00; }
        .status-sent { background: #2e7d32; }
        .status-removed { background: #b3261e; }

        .action-links a { color: var(--text-secondary); text-decoration: underline; font-size: 0.75rem; font-weight: 600; cursor: pointer; }

        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); backdrop-filter: blur(4px); z-index: 2000; display: none; align-items: center; justify-content: center; }
        .modal-box { background: var(--bg); border: 1px solid var(--accent); width: 400px; padding: 30px; }
        .modal-box h3 { margin-top: 0; font-size: 1rem; font-weight: 500; margin-bottom: 25px; text-transform: lowercase; }
        .status-option { display: block; padding: 12px; border: 1px solid var(--line); margin-bottom: 10px; cursor: pointer; transition: 0.2s; font-size: 0.85rem; text-transform: lowercase; }
        .status-option:hover { background: var(--sidebar-bg); }
        .status-option.selected { border-color: var(--accent); background: var(--sidebar-bg); font-weight: 600; }

        .bottom-bar { position: fixed; bottom: 0; left: var(--sidebar-width); right: 0; height: var(--footer-height); background: var(--sidebar-bg); border-top: 1px solid var(--line); display: flex; align-items: center; justify-content: space-between; padding: 0 80px; z-index: 100; }
        .bottom-bar span { font-size: 0.7rem; color: var(--text-secondary); letter-spacing: -0.01em; }
    </style>
</head>
<body>

    <aside>
        <div class="brand-logo" onclick="window.location.href='https://undersouthern.asia/dashboard'">
            <img src="https://raw.githubusercontent.com/phvinh1968-a11y/my-images/main/logoblack.png" alt="label-logo">
        </div>
        <nav id="sidebar-nav">
            <a href="https://undersouthern.asia/dashboard">dashboard</a>
            <a href="https://undersouthern.asia/release">create release</a>
            <a href="#" class="active">catalog access</a>
            <a href="#">analytics</a>
            <a href="#">royalty reports</a>
            <a href="#">user access</a>
        </nav>
        <div class="logout-container"><button class="logout-btn" onclick="window.location.href='https://undersouthern.asia/login'">logout</button></div>
    </aside>

    <div class="wrapper">
        <main>
            <header>
                <div class="header-title">
                    <h1>catalog access</h1>
                    <span>all music assets & distribution data</span>
                </div>
            </header>

            <section class="catalog-stats">
                <div class="stat-item"><b id="count-total">0</b><span>total releases</span></div>
                <div class="stat-item"><b id="count-live">0</b><span>sent to stores</span></div>
            </section>

            <div class="toolbar">
                <div class="search-wrapper">
                    <span class="search-icon">⌕</span>
                    <input type="text" class="search-box" id="search-input" placeholder="search release, artist, composer, code...">
                    <span class="clear-search" id="clear-btn" onclick="clearSearch()">✕</span>
                </div>
            </div>

            <table class="catalog-table">
                <thead>
                    <tr>
                        <th>release info / codes</th>
                        <th>artist / composer</th>
                        <th>release date</th>
                        <th>status</th>
                        <th>actions</th>
                    </tr>
                </thead>
                <tbody id="catalog-list"></tbody>
            </table>
        </main>

        <footer class="bottom-bar">
            <span>© 2026 undersouthern. all rights reserved.</span>
            <span>label portal system v1.0</span>
        </footer>
    </div>

    <div class="modal-overlay" id="manage-modal">
        <div class="modal-box">
            <h3>manage release status</h3>
            <div class="status-option" id="opt-pending" onclick="updateStatus('pending')">pending</div>
            <div class="status-option" id="opt-sent" onclick="updateStatus('sent')">sent to stores</div>
            <div class="status-option" id="opt-removed" onclick="updateStatus('removed')">removed from stores</div>
            <button onclick="closeModal()" style="margin-top: 15px; width: 100%; padding: 10px; background: transparent; border: 1px solid var(--line); cursor: pointer; text-transform: lowercase;">cancel</button>
        </div>
    </div>

    <script>
        let currentManageId = null;

        // DỮ LIỆU THỬ NGHIỆM ĐA DẠNG NGHỆ SĨ VÀ COMPOSER
        const mockData = [
            { 
                title: "midnight city (remix)", 
                mainArtist: "vinh phung", 
                featArtists: ["lofi cat"], 
                composers: ["phung hoang vinh", "lofi producer"], 
                date: "2026-03-15", artwork: "", status: "sent", upc: "198273645012", isrc: "VN-A01-26-00001" 
            },
            { 
                title: "hanoi cypher 2026", 
                mainArtist: "rap trend", 
                featArtists: ["rapper a", "vocal b", "mc flow"], 
                composers: ["vinh p.", "beatmaker x", "nguyen a", "tran b"], 
                date: "2026-04-10", artwork: "", status: "pending", upc: "882910374621", isrc: "VN-A01-26-00002" 
            },
            { 
                title: "global southern vibe", 
                mainArtist: "undersouthern", 
                featArtists: ["artist one", "artist two", "artist three", "artist four"], 
                composers: ["comp 1", "comp 2", "comp 3", "comp 4", "comp 5"], 
                date: "2026-05-20", artwork: "", status: "sent", upc: "112233445566", isrc: "VN-A01-26-00003" 
            }
        ];

        const initCatalog = () => {
            localStorage.setItem('undersouthern_catalog', JSON.stringify(mockData));
        }

        const loadCatalog = (filteredData = null) => {
            const catalogList = document.getElementById('catalog-list');
            const data = filteredData || JSON.parse(localStorage.getItem('undersouthern_catalog') || '[]');
            
            catalogList.innerHTML = data.map((item) => {
                let statusLabel = 'pending';
                if(item.status === 'sent') statusLabel = 'sent to stores';
                if(item.status === 'removed') statusLabel = 'removed from stores';

                const globalData = JSON.parse(localStorage.getItem('undersouthern_catalog'));
                const globalIndex = globalData.findIndex(g => g.upc === item.upc);

                let artistDisplay = `<b>${item.mainArtist}</b>`;
                if(item.featArtists && item.featArtists.length > 0) {
                    artistDisplay += ` ft. ${item.featArtists.join(', ')}`;
                }

                let composerDisplay = item.composers ? item.composers.join(', ') : 'n/a';

                return `
                    <tr>
                        <td>
                            <div class="artwork-cell">
                                <div class="img-wrap"><img src="${item.artwork || 'https://via.placeholder.com/150/dcdcdc/6b6b6b?text=art'}"></div>
                                <div class="info-stack">
                                    <b>${item.title}</b>
                                    <span>upc: ${item.upc || 'n/a'} • isrc: ${item.isrc || 'n/a'}</span>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="credit-stack">
                                <div class="artist-list">${artistDisplay}</div>
                                <div class="role">comp: ${composerDisplay}</div>
                            </div>
                        </td>
                        <td>${item.date}</td>
                        <td>
                            <span class="status-dot status-${item.status}"></span>
                            ${statusLabel}
                        </td>
                        <td class="action-links">
                            <a onclick="openManage(${globalIndex})">manage</a>
                        </td>
                    </tr>
                `;
            }).join('');

            const allData = JSON.parse(localStorage.getItem('undersouthern_catalog') || '[]');
            document.getElementById('count-total').innerText = allData.length;
            document.getElementById('count-live').innerText = allData.filter(d => d.status === 'sent').length;
        };

        function openManage(index) {
            currentManageId = index;
            const data = JSON.parse(localStorage.getItem('undersouthern_catalog'));
            const currentStatus = data[index].status;
            document.querySelectorAll('.status-option').forEach(opt => opt.classList.remove('selected'));
            document.getElementById(`opt-${currentStatus}`).classList.add('selected');
            document.getElementById('manage-modal').style.display = 'flex';
        }

        function closeModal() { document.getElementById('manage-modal').style.display = 'none'; }

        function updateStatus(newStatus) {
            const data = JSON.parse(localStorage.getItem('undersouthern_catalog') || '[]');
            data[currentManageId].status = newStatus;
            localStorage.setItem('undersouthern_catalog', JSON.stringify(data));
            loadCatalog();
            closeModal();
        }

        const searchInput = document.getElementById('search-input');
        const clearBtn = document.getElementById('clear-btn');

        searchInput.addEventListener('input', function(e) {
            const query = e.target.value.toLowerCase().trim();
            clearBtn.style.display = query.length > 0 ? 'block' : 'none';
            const data = JSON.parse(localStorage.getItem('undersouthern_catalog') || '[]');
            const filtered = data.filter(item => {
                const searchStr = (item.title + item.mainArtist + (item.featArtists ? item.featArtists.join('') : '') + (item.composers ? item.composers.join('') : '') + item.upc + item.isrc).toLowerCase();
                return searchStr.includes(query);
            });
            loadCatalog(filtered);
        });

        function clearSearch() {
            searchInput.value = '';
            clearBtn.style.display = 'none';
            loadCatalog();
            searchInput.focus();
        }

        window.onload = () => {
            initCatalog();
            loadCatalog();
        };
    </script>
</body>
</html>
