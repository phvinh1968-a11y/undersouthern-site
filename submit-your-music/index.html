<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal Music Editor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif;
            background-color: #fff;
            color: #1a1a1a;
        }

        /* Sidebar Item - Tối giản */
        .nav-item {
            @apply flex items-center justify-between w-full px-4 py-3 text-sm transition-all border-b border-gray-50;
        }
        .nav-item.active {
            @apply bg-gray-50 font-semibold;
            border-left: 3px solid #000;
        }

        /* Nút bấm phẳng */
        .btn-action {
            @apply py-2 px-4 text-xs font-semibold border border-black hover:bg-black hover:text-white transition-all uppercase tracking-wider;
        }

        /* Khung nội dung nét đứt cực mảnh */
        .content-card {
            border: 1px dashed #e5e7eb;
            @apply p-10 bg-white;
        }

        /* Vùng upload tối giản */
        .upload-zone {
            border: 1px dashed #000;
            @apply py-16 text-center cursor-pointer hover:bg-gray-50 transition-all mb-10;
        }

        /* Input gạch chân mảnh */
        .field-input {
            @apply w-full py-2 bg-transparent border-b border-gray-200 outline-none focus:border-black transition-all text-sm;
        }

        .track-pane { display: none; }
        .track-pane.active { display: block; }
        
        /* Ẩn scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <div class="flex flex-1 overflow-hidden">
        
        <aside class="w-64 border-r border-gray-100 flex flex-col">
            <div class="p-6 space-y-3">
                <button onclick="location.reload()" class="btn-action w-full">Start New</button>
                <button onclick="addNewTrack()" class="btn-action w-full">Add Track</button>
            </div>

            <div class="px-6 py-2 text-[10px] font-bold text-gray-400 uppercase tracking-widest">Collection</div>
            
            <div id="track-list" class="flex-1 overflow-y-auto no-scrollbar">
                </div>

            <div class="p-6 border-t border-gray-50">
                <button class="w-full py-3 bg-black text-white text-xs font-bold uppercase tracking-widest hover:bg-gray-800">
                    Finish & Release
                </button>
            </div>
        </aside>

        <main class="flex-1 overflow-y-auto bg-[#fafafa] p-12">
            <div id="editor-container" class="max-w-2xl mx-auto">
                </div>
        </main>
    </div>

    <template id="track-template">
        <div class="track-pane animate-in fade-in duration-500">
            <div class="content-card">
                <div class="flex justify-between items-end mb-8">
                    <h2 class="text-2xl font-light italic">Track <span class="track-num">01</span></h2>
                    <button onclick="deleteTrack(this)" class="text-[10px] text-gray-400 hover:text-black uppercase tracking-widest">[ Remove ]</button>
                </div>

                <div class="upload-zone">
                    <span class="text-xs font-medium uppercase tracking-widest">Drop Audio File</span>
                    <p class="text-[10px] text-gray-400 mt-2 font-light italic">WAV, MP3, AIFF (Max 500MB)</p>
                </div>

                <div class="space-y-10">
                    <div>
                        <label class="block text-[10px] font-bold uppercase tracking-widest text-gray-400 mb-1">Title</label>
                        <input type="text" class="field-input" placeholder="Track name...">
                    </div>

                    <div>
                        <label class="block text-[10px] font-bold uppercase tracking-widest text-gray-400 mb-1">Artist</label>
                        <input type="text" class="field-input" placeholder="Artist name...">
                    </div>

                    <div class="flex gap-8 items-center pt-2">
                        <span class="text-[10px] font-bold uppercase tracking-widest text-gray-400">Explicit Content</span>
                        <div class="flex gap-4 text-xs">
                            <label class="cursor-pointer"><input type="radio" name="exp" class="accent-black mr-1"> No</label>
                            <label class="cursor-pointer"><input type="radio" name="exp" class="accent-black mr-1"> Yes</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <script>
        let tracks = [];

        function addNewTrack() {
            const id = 'tr-' + Date.now();
            const num = (tracks.length + 1).toString().padStart(2, '0');
            tracks.push({ id, num });

            // 1. Sidebar Item
            const list = document.getElementById('track-list');
            const nav = document.createElement('div');
            nav.id = 'nav-' + id;
            nav.className = 'nav-item cursor-pointer';
            nav.onclick = () => switchTrack(id);
            nav.innerHTML = `<span class="nav-label">Track ${num}</span><span class="text-[10px] opacity-0 status-mark">*</span>`;
            list.appendChild(nav);

            // 2. Editor Pane
            const container = document.getElementById('editor-container');
            const temp = document.getElementById('track-template');
            const clone = temp.content.cloneNode(true);
            const pane = clone.querySelector('.track-pane');
            pane.id = 'pane-' + id;
            pane.querySelector('.track-num').textContent = num;
            
            // Đảm bảo radio button không bị trùng lặp giữa các track
            clone.querySelectorAll('input[type="radio"]').forEach(r => r.name = 'exp-' + id);

            container.appendChild(clone);
            switchTrack(id);
        }

        function switchTrack(id) {
            // Ẩn/Hiện Pane
            document.querySelectorAll('.track-pane').forEach(p => p.classList.remove('active'));
            document.getElementById('pane-' + id).classList.add('active');

            // Cập nhật Sidebar
            document.querySelectorAll('.nav-item').forEach(n => {
                n.classList.remove('active');
                n.querySelector('.status-mark').style.opacity = '0';
                n.querySelector('.nav-label').style.fontStyle = 'normal';
            });
            
            const activeNav = document.getElementById('nav-' + id);
            activeNav.classList.add('active');
            activeNav.querySelector('.status-mark').style.opacity = '1';
            activeNav.querySelector('.nav-label').style.fontStyle = 'italic';
        }

        function deleteTrack(btn) {
            if (!confirm("Xác nhận xóa track?")) return;
            const pane = btn.closest('.track-pane');
            const id = pane.id.replace('pane-', '');
            
            pane.remove();
            document.getElementById('nav-' + id).remove();
            
            tracks = tracks.filter(t => t.id !== id);
            if (tracks.length > 0) switchTrack(tracks[0].id);
        }

        // Khởi tạo track đầu tiên
        window.onload = addNewTrack;
    </script>
</body>
</html>
