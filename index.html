<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UNDERSOUTHERN</title>

<link rel="icon" type="image/png" href="https://github.com/phvinh1968-a11y/my-images/raw/main/logo_black.png">

<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Arial', sans-serif; background:#111; color:#fff; overflow-x:hidden; }

/* Header */
header {
  position:fixed; top:0; left:0; width:100%; padding:20px 40px;
  display:flex; justify-content:center; align-items:center; background: transparent; z-index:1000;
}
header nav ul { list-style:none; display:flex; gap:10px; }
header nav ul li { color:#fff; font-size:0.8rem; }
header nav ul li span { opacity:0.8; cursor:default; }

/* Hero */
.hero { position:relative; width:100%; height:100vh; display:flex; justify-content:center; align-items:center; overflow:hidden; }
.hero video { position:absolute; top:50%; left:50%; width:auto; height:100%; min-width:100%; min-height:100%; transform:translate(-50%,-50%); object-fit:cover; z-index:-1; opacity:0; transition:opacity 1.5s ease-in-out; will-change: opacity; }
.hero video.loaded { opacity:1; }
.hero .logo { position:relative; z-index:2; width:150px; max-width:30%; animation:pulse 2s infinite ease-in-out; transform-origin:center; }
@keyframes pulse { 0%,100%{transform:scale(1);opacity:0.9;} 50%{transform:scale(1.1);opacity:1;} }

/* Playlist */
.playlist {
  background:#000;
  padding:20px;
  display:flex;
  justify-content:center;
  align-items:center;
}
.playlist iframe {
  border-radius:12px;
  max-width:800px;
  width:100%;
  height:400px;
}

/* Footer */
footer { padding:15px 30px; background:#111; color:#ccc; font-size:0.65rem; border-top:1px solid rgba(255,255,255,0.1); }
.footer-container { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:10px; }

#legalInfoBtn {
  font-size: 1rem;
  font-weight: bold;
  color:#fff;
  text-decoration:none;
  cursor:pointer;
}

/* Modal overlay */
.modal {
  position:fixed; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.9); display:none;
  justify-content:center; align-items:center; z-index:3000;
  padding:20px;
  overflow-y:auto; 
}

/* Modal content */
.modal .modal-content {
  background:#111; border-radius:12px;
  display:flex; flex-direction:column;
  max-width:600px; width:95%;
  max-height:85vh;
  overflow:hidden;
  font-family: 'Arial', sans-serif;
  color:#fff;
  word-break: break-word;
}

/* Modal header (back + title + close) */
.modal-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 15px;
  border-bottom:1px solid rgba(255,255,255,0.1);
}
.modal-header h3 {
  flex:1;
  text-align:center;
  font-size:1rem;
  margin:0;
}
.close-btn, .back-btn {
  background:none; border:none; color:#fff;
  font-size:1.1rem; cursor:pointer;
}
.back-btn { visibility:hidden; }

/* Modal body */
.modal-body {
  padding:15px;
  overflow-y:auto;
  flex:1;
}

/* Links in Legal modal */
.legal-links a {
  display:block;
  padding:12px 0;
  font-size:0.9rem;
  color:#0f0;
  text-decoration:none;
  border-bottom:1px solid rgba(255,255,255,0.1);
}
.legal-links a:hover { color:#fff; }

.social-icons {
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:5px;
  width:100%;
}
.social-icons a {
  display:flex;
  justify-content:center;
  align-items:center;
  background: rgba(255,255,255,0.05);
  padding:6px 8px;
  border-radius:4px;
  font-size:0.7rem;
  color:#fff;
  text-decoration:none;
  cursor:pointer;
  text-transform: lowercase;
  transition: transform 0.2s, background 0.2s;
}
.social-icons a:hover { background: rgba(255,255,255,0.2); transform: scale(1.05); }

/* Dashboard login */
#dashboard input, #dashboard button,
#register input, #register button {
  margin:5px 0; padding:8px; width:100%; border:none; border-radius:6px;
}
#dashboard button, #register button { background:#0f0; color:#000; cursor:pointer; font-weight:bold; }
#dashboard button:hover, #register button:hover { background:#fff; }
#dashboard table { border-collapse: collapse; width:100%; margin-top:15px; font-size:0.85rem; }
#dashboard th, #dashboard td { border:1px solid #444; padding:6px; text-align:left; }
#dashboard th { background:#222; }

@media (max-width:480px) {
  .modal .modal-content { max-width:95%; font-size:0.8rem; }
}
</style>
</head>
<body>

<header>
  <nav>
    <ul>
      <li><span>Vietnam</span></li>
      <li><span>Established 2024</span></li>
    </ul>
  </nav>
</header>

<section class="hero">
  <video id="bgVideo" muted autoplay loop playsinline preload="auto" poster="https://via.placeholder.com/1920x1080/111111/111111.png">
    <source src="https://github.com/phvinh1968-a11y/my-images/raw/main/video_background.mp4" type="video/mp4">
  </video>
  <img class="logo" src="https://github.com/phvinh1968-a11y/my-images/raw/main/logo_processed.png" alt="UNDERSOUTHERN Logo">
</section>

<!-- Spotify Playlist -->
<section class="playlist">
  <iframe src="https://open.spotify.com/embed/playlist/3LONU63iZ0Np42Uiyztvnm?utm_source=generator&theme=0" 
          frameBorder="0" allowfullscreen="" 
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
          loading="lazy"></iframe>
</section>

<footer>
  <div class="footer-container">
    <div class="footer-left">
      © 2025 UNDERSOUTHERN · Independent Music Label
    </div>
    <div class="footer-right">
      <a id="legalInfoBtn">Legal & Info ▾</a>
    </div>
  </div>
</footer>

<!-- Legal Modal -->
<div id="legalModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <button class="back-btn" id="backBtn">←</button>
      <h3 id="modalTitle">Legal & Info</h3>
      <button class="close-btn" id="closeLegal">&times;</button>
    </div>
    <div class="modal-body">
      <!-- Menu chính -->
      <div id="legalMenu">
        <div class="legal-links">
          <a href="#" data-target="aboutUs">about us</a>
          <a href="https://github.com/phvinh1968-a11y/my-images/raw/main/EXCLUSIVE_DISTRIBUTION_AGREEMEN.pdf" download>distribution agreement</a>
          <a href="#" data-target="antiFraud">anti-fraud policy</a>
          <a href="#" data-target="privacy">privacy and cookies</a>
          <a href="#" data-target="contact">contact</a>
          <a href="#" data-target="dashboard">dashboard royalties</a>
        </div>
      </div>

      <!-- Nội dung từng mục -->
      <div id="aboutUs" class="legal-page" style="display:none;">...</div>
      <div id="antiFraud" class="legal-page" style="display:none;">...</div>
      <div id="privacy" class="legal-page" style="display:none;">...</div>
      <div id="contact" class="legal-page" style="display:none;">...</div>

      <!-- Dashboard Login -->
      <div id="dashboard" class="legal-page" style="display:none;">
        <h4>login</h4>
        <input id="username" placeholder="Username">
        <input id="password" type="password" placeholder="Password">
        <button onclick="login()">Login</button>
        <p id="msg" style="color:red"></p>

        <p style="margin-top:10px; font-size:0.85rem; color:#ccc;">
          Chưa có tài khoản? 
          <a href="#" id="goRegister" style="color:#0f0; text-decoration:underline; cursor:pointer;">
            Đăng ký
          </a>
        </p>

        <div id="dashboardData" style="display:none">
          <h4 id="artistName"></h4>
          <table>
            <thead>
              <tr><th>Track</th><th>Store</th><th>Period</th><th>Amount</th></tr>
            </thead>
            <tbody id="royalties"></tbody>
          </table>
        </div>
      </div>

      <!-- Register Tab -->
      <div id="register" class="legal-page" style="display:none;">
        <input id="regEmail" type="email" placeholder="Email">
        <input id="regArtist" placeholder="Artist Name">
        <input id="regUser" placeholder="Username">
        <input id="regPass" type="password" placeholder="Password">
        <button onclick="register()">Register</button>
        <p id="regMsg" style="color:red"></p>
      </div>

    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const video = document.getElementById('bgVideo');
  video.addEventListener('loadeddata', () => video.classList.add('loaded'));

  const legalModal = document.getElementById('legalModal');
  const legalBtn = document.getElementById('legalInfoBtn');
  const closeLegal = document.getElementById('closeLegal');
  const backBtn = document.getElementById('backBtn');
  const modalTitle = document.getElementById('modalTitle');
  const legalMenu = document.getElementById('legalMenu');
  const pages = document.querySelectorAll('.legal-page');

  function showMenu() {
    legalMenu.style.display='block';
    pages.forEach(p => p.style.display='none');
    backBtn.style.visibility='hidden';
    modalTitle.textContent='Legal & Info';
  }

  function showPage(id, title) {
    legalMenu.style.display='none';
    pages.forEach(p => p.style.display='none');
    document.getElementById(id).style.display='block';
    backBtn.style.visibility='visible';
    modalTitle.textContent=title;
  }

  legalBtn.addEventListener('click', () => {
    legalModal.style.display='flex';
    showMenu();
  });

  closeLegal.addEventListener('click', () => legalModal.style.display='none');
  backBtn.addEventListener('click', showMenu);

  document.querySelectorAll('.legal-links a[data-target]').forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      const target = link.dataset.target;
      const title = link.textContent.trim();
      showPage(target, title);
    });
  });

  // Chuyển sang tab Register khi click "Đăng ký"
  const goRegister = document.getElementById("goRegister");
  if (goRegister) {
    goRegister.addEventListener("click", e => {
      e.preventDefault();
      document.getElementById("dashboard").style.display = "none";
      document.getElementById("register").style.display = "block";
      modalTitle.textContent = "register";
      backBtn.style.visibility = "visible";
    });
  }

  window.addEventListener('click', e => {
    if(e.target === legalModal) legalModal.style.display='none';
  });
});

// ========== Dashboard Login Script ==========
const API_URL = "https://script.google.com/macros/s/AKfycbxFvQrFIqgTC3fDOBhr4YDlKyHiK5FSJgQjzDt6pE42p44KLbSX3n-DPZtqU2S8jpWC_g/exec"; // Thay bằng link Web App của bạn

async function login() {
  const username = document.getElementById('username').value;
  const password = document.getElementById('password').value;

  const res = await fetch(API_URL, {
    method: "POST",
    body: JSON.stringify({ action:"login", username, password }),
    headers: { "Content-Type": "application/json" }
  });
  const data = await res.json();

  if (data.success) {
    document.getElementById('msg').innerText = "";
    document.getElementById('dashboardData').style.display = "block";
    document.getElementById('artistName').innerText = "Xin chào, " + data.artist;
    const tbody = document.getElementById('royalties');
    tbody.innerHTML = "";
    data.royalties.forEach(r => {
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${r.track}</td><td>${r.store}</td><td>${r.period}</td><td>${r.amount}</td>`;
      tbody.appendChild(tr);
    });
  } else {
    document.getElementById('msg').innerText = data.message;
  }
}

// Thêm chức năng Register
async function register() {
  const email = document.getElementById('regEmail').value;
  const artist = document.getElementById('regArtist').value;
  const username = document.getElementById('regUser').value;
  const password = document.getElementById('regPass').value;

  const res = await fetch(API_URL, {
    method: "POST",
    body: JSON.stringify({ action:"register", email, artist, username, password }),
    headers: { "Content-Type": "application/json" }
  });
  const data = await res.json();

  // Hiển thị thông báo từ server
  document.getElementById('regMsg').innerText = data.message;

  // Nếu đăng ký thành công → đổi màu xanh và quay lại Login sau 2s
  if (data.success) {
    document.getElementById('regMsg').style.color = "lime";
    setTimeout(() => {
      document.getElementById("register").style.display = "none";
      document.getElementById("dashboard").style.display = "block";
      document.getElementById('msg').style.color = "lime";
      document.getElementById('msg').innerText = "Đăng ký thành công! Vui lòng đăng nhập.";
    }, 2000);
  }
}
</script>

</body>
</html>
