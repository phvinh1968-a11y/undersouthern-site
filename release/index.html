<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>create release</title>
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/phvinh1968-a11y/my-images/main/logoblack.png">

    <style>
        :root {
            --bg: #f4f4f2; 
            --sidebar-bg: #ecece9;
            --card-bg: #ecece9;
            --text-main: #1a1a1a;
            --text-secondary: #6b6b6b;
            --line: #dcdcdc;
            --accent: #000000;
            --sidebar-width: 280px;
            --footer-height: 50px;
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { box-sizing: border-box; -webkit-font-smoothing: antialiased; }

        body {
            font-family: -apple-system, blinkmacsystemfont, "inter", sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            display: flex;
            height: 100vh;
            text-transform: lowercase;
            letter-spacing: -0.01em;
            overflow: hidden;
            position: relative;
        }

        body::before {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("https://grainy-gradients.vercel.app/noise.svg");
            opacity: 0.03; pointer-events: none; z-index: 999;
        }

        aside {
            width: var(--sidebar-width); border-right: 1px solid var(--line);
            display: flex; flex-direction: column; padding: 60px 0;
            background: var(--sidebar-bg); height: 100vh; z-index: 10; flex-shrink: 0;
        }

        .brand-logo { width: 140px; margin: 0 auto 80px auto; opacity: 0.9; cursor: pointer; }
        .brand-logo img { width: 100%; height: auto; display: block; }

        nav { display: flex; flex-direction: column; gap: 32px; width: 100%; padding: 0 45px; }
        nav a {
            text-decoration: none; color: var(--text-secondary);
            font-size: 0.85rem; font-weight: 500; transition: var(--transition);
            display: flex; align-items: center; gap: 12px; position: relative;
        }
        nav a::before {
            content: ""; width: 6px; height: 6px; background-color: var(--accent);
            border-radius: 50%; position: absolute; left: -15px; opacity: 0;
            transform: scale(0); transition: var(--transition);
        }
        nav a.active::before { opacity: 1; transform: scale(1); }
        nav a.active { color: var(--accent); transform: translatex(6px); }

        .logout-container { margin-top: auto; padding: 0 45px; width: 100%; }
        .logout-btn { color: #b3261e; opacity: 0.9; background: none; border: none; cursor: pointer; font-size: 0.85rem; text-transform: lowercase; }

        .wrapper { flex-grow: 1; display: flex; flex-direction: column; height: 100vh; position: relative; min-width: 0; }
        main { 
            flex-grow: 1; padding: 60px 80px; overflow-y: auto; 
            padding-bottom: calc(var(--footer-height) + 40px); 
        }

        header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 80px; }
        .header-title h1 { font-size: 1.2rem; font-weight: 500; margin: 0 0 8px 0; }
        .header-title span { font-size: 0.85rem; color: var(--text-secondary); }

        .form-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px 40px; max-width: 950px; }
        .full-width { grid-column: span 2; }
        .form-group { position: relative; display: flex; flex-direction: column; }
        .form-group label { display: flex; align-items: center; font-size: 0.72rem; color: var(--text-secondary); margin-bottom: 8px; font-weight: 600; letter-spacing: 0.05em; height: 14px; }
        
        .help-icon { display: inline-flex; align-items: center; justify-content: center; width: 14px; height: 14px; border: 1px solid var(--text-secondary); border-radius: 50%; font-size: 9px; margin-left: 6px; cursor: pointer; transition: 0.2s; }
        .artwork-tooltip { position: absolute; top: 25px; left: 0; width: 280px; background: #1a1a1a; color: #fff; padding: 20px; font-size: 0.75rem; line-height: 1.6; z-index: 100; display: none; box-shadow: 0 10px 30px rgba(0,0,0,0.3); text-transform: lowercase; }

        /* FIX MŨI TÊN RELEASE TYPE */
        .select-wrapper { position: relative; width: 100%; display: block; }
        .select-wrapper select { 
            width: 100%; background: transparent; border: none; border-bottom: 1px solid var(--line); 
            padding: 8px 0; outline: none; font-size: 1rem; text-transform: lowercase; 
            transition: border-bottom 0.3s; border-radius: 0;
            appearance: none; -webkit-appearance: none; /* Ẩn mũi tên mặc định */
        }
        .select-wrapper::after { 
            content: '▼'; font-size: 0.5rem; position: absolute; right: 0; bottom: 12px; 
            color: var(--text-secondary); pointer-events: none; z-index: 2;
        }

        .form-group input { 
            width: 100%; background: transparent; border: none; border-bottom: 1px solid var(--line); 
            padding: 8px 0; outline: none; font-size: 1rem; text-transform: lowercase; 
            transition: border-bottom 0.3s; border-radius: 0;
        }
        .form-group input:focus, .select-wrapper select:focus { border-bottom-color: var(--accent); }

        /* Tag system */
        .tags-container { display: flex; flex-wrap: wrap; gap: 6px; border-bottom: 1px solid var(--line); padding-bottom: 5px; min-height: 38px; align-items: center; cursor: text; }
        .tag { background: var(--accent); color: #fff; font-size: 0.75rem; padding: 3px 8px; display: flex; align-items: center; gap: 6px; border-radius: 2px; }
        .tag span { cursor: pointer; font-weight: bold; font-size: 10px; opacity: 0.7; }
        .tags-container input { border: none !important; width: auto !important; flex: 1; min-width: 10px; padding: 5px 0 !important; font-size: 1rem !important; }

        .artwork-upload-box { width: 160px; height: 160px; background: var(--card-bg); border: 1px solid var(--line); display: flex; align-items: center; justify-content: center; cursor: pointer; position: relative; overflow: hidden; }
        .artwork-upload-box img { width: 100%; height: 100%; object-fit: cover; position: absolute; display: none; }

        /* --- TRACKS SECTION --- */
        .tracks-section { margin-top: 50px; border-top: 1px solid var(--line); padding-top: 40px; max-width: 950px; }
        #audio-label { margin-bottom: 40px !important; font-size: 0.8rem; letter-spacing: 0.1em; display: block; }
        
        .track-item-container { 
            margin-bottom: 15px; border: 1px solid var(--line); 
            background: rgba(236, 236, 233, 0.3);
            display: flex; align-items: stretch; /* */
        }

        .track-number {
            width: 35px; flex-shrink: 0; background: rgba(0, 0, 0, 0.03);
            display: flex; align-items: center; justify-content: center;
            font-size: 0.65rem; font-weight: 700; color: var(--text-secondary);
            border-right: 1px solid var(--line);
        }

        .track-row { 
            display: flex; flex-grow: 1; 
            align-items: center; /* */
            gap: 15px; padding: 20px; 
        }

        .track-row .form-group label { font-size: 0.6rem !important; margin-bottom: 4px; height: 15px; display: flex; align-items: center; }
        .track-row input { font-size: 0.8rem !important; padding: 6px 0 !important; height: 25px; }
        .track-row .tags-container { min-height: 25px !important; padding-bottom: 2px; }

        .track-row .form-group:nth-child(1) { flex: 1.3; } 
        .track-row .form-group:nth-child(2), 
        .track-row .form-group:nth-child(3), 
        .track-row .form-group:nth-child(4) { flex: 1; }

        .action-mini-btn { 
            cursor: pointer; border-bottom: 1px solid var(--line); padding: 4px 0; text-align: center; min-width: 60px;
            transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 6px; opacity: 0.6; height: 25px;
        } /* */
        .action-mini-btn:hover { border-bottom-color: var(--accent); opacity: 1; }
        .action-mini-btn span { font-size: 0.58rem !important; font-weight: 700; text-transform: uppercase; color: var(--text-secondary); }
        .ready-state { opacity: 1 !important; border-bottom-color: var(--accent) !important; }
        .ready-state span { color: var(--accent) !important; }

        .submit-container { display: flex; max-width: 950px; margin-top: 40px; }
        .btn-submit { 
            background: var(--accent); color: #fff; border: none; padding: 12px 60px; 
            font-size: 0.8rem; font-weight: 600; cursor: pointer; letter-spacing: 0.1em; margin-left: auto; 
            transition: var(--transition);
        }

        .bottom-bar {
            position: fixed; bottom: 0; left: var(--sidebar-width); right: 0;
            height: var(--footer-height); background: var(--sidebar-bg); border-top: 1px solid var(--line);
            display: flex; align-items: center; justify-content: space-between; padding: 0 80px; z-index: 100;
        } /* */
        .bottom-bar span { font-size: 0.65rem; color: var(--text-secondary); }

        .btn-add-track { background: transparent; border: 1px dashed var(--line); color: var(--text-secondary); width: 100%; padding: 12px; font-size: 0.75rem; cursor: pointer; margin-top: 5px; }

        .lyrics-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); backdrop-filter: blur(4px); z-index: 2000; display: none; align-items: center; justify-content: center; }
        .lyrics-modal-box { background: var(--bg); border: 1px solid var(--accent); width: 90%; max-width: 550px; padding: 25px; }
        .lyrics-modal-box textarea { width: 100%; background: transparent; border: 1px solid var(--line); padding: 12px; font-family: inherit; font-size: 0.8rem; min-height: 250px; outline: none; }
        .btn-done-lyrics { margin-top: 15px; width: 100%; background: var(--accent); color: #fff; border: none; padding: 10px; cursor: pointer; font-size: 0.75rem; font-weight: 600; }
    </style>
</head>
<body>

    <aside>
        <div class="brand-logo" onclick="window.location.href='https://undersouthern.asia/dashboard'">
            <img src="https://raw.githubusercontent.com/phvinh1968-a11y/my-images/main/logoblack.png" alt="label-logo">
        </div>
        <nav id="sidebar-nav">
            <a href="https://undersouthern.asia/dashboard">dashboard</a>
            <a href="https://undersouthern.asia/release" class="active">create release</a>
            <a href="#">catalog access</a>
            <a href="#">analytics</a>
            <a href="#">royalty reports</a>
            <a href="#">user access</a>
        </nav>
        <div class="logout-container"><button class="logout-btn" onclick="window.location.href='https://undersouthern.asia/login'">logout</button></div>
    </aside>

    <div class="wrapper">
        <main id="scroll-area">
            <header>
                <div class="header-title">
                    <h1>create release</h1>
                    <span>distribute your music global</span>
                </div>
            </header>

            <form id="submit-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label>cover artwork <div class="help-icon" onclick="toggleTooltip(event, 'artwork-tooltip')">?</div></label>
                        <div class="artwork-tooltip" id="artwork-tooltip">
                            <b>artwork requirements:</b>
                            <ul>
                                <li>file formats: jpg, png</li>
                                <li>resolution: 1000x1000 to 4000x4000</li>
                                <li>must be a perfect square</li>
                                <li>you must own the rights</li>
                            </ul>
                        </div>
                        <div class="artwork-upload-box" onclick="document.getElementById('artwork-file').click()">
                            <span id="art-txt" style="font-size: 0.6rem;">upload artwork</span>
                            <img id="preview-img">
                            <input type="file" id="artwork-file" hidden accept="image/*" onchange="previewArt(this)">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>release type</label>
                        <div class="select-wrapper">
                            <select id="release-type" onchange="handleTypeLogic()" required>
                                <option value="single" selected>single</option>
                                <option value="ep">ep</option>
                                <option value="album">album</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label id="title-label">single title</label>
                        <input type="text" id="main-title" required>
                    </div>
                    <div class="form-group">
                        <label>title version</label>
                        <input type="text" placeholder="eg. radio edit, remix">
                    </div>

                    <div class="form-group"><label>primary artist</label><div class="tags-container" onclick="this.querySelector('input').focus()"><input type="text" class="tag-input"></div></div>
                    <div class="form-group"><label>featured artist</label><div class="tags-container" onclick="this.querySelector('input').focus()"><input type="text" class="tag-input"></div></div>

                    <div class="form-group">
                        <label>primary genre</label>
                        <div class="select-wrapper"><select id="primary-genre" required><option value="" disabled selected>select genre</option></select></div>
                    </div>
                    <div class="form-group">
                        <label>secondary genre</label>
                        <div class="select-wrapper"><select id="secondary-genre"><option value="" selected>optional</option></select></div>
                    </div>

                    <div class="form-group"><label>producer</label><div class="tags-container" onclick="this.querySelector('input').focus()"><input type="text" class="tag-input"></div></div>
                    
                    <div class="form-group">
                        <label>language</label>
                        <div class="select-wrapper"><select id="language-select" required><option value="" disabled selected>select language</option></select></div>
                    </div>

                    <div class="form-group">
                        <label>explicit content <div class="help-icon" onclick="toggleTooltip(event, 'explicit-tooltip')">?</div></label>
                        <div class="artwork-tooltip" id="explicit-tooltip">
                            <b>explicit content guidelines:</b>
                            <ul>
                                <li>yes: contains profanity</li>
                                <li>no: clean lyrics</li>
                                <li>cleaned: censored version</li>
                            </ul>
                        </div>
                        <div class="select-wrapper">
                            <select required><option value="no" selected>no</option><option value="yes">yes</option><option value="cleaned">cleaned</option></select>
                        </div>
                    </div>

                    <div class="form-group"><label>release date</label><input type="date" required></div>

                    <div class="form-group"><label>© copyright holder</label><input type="text" placeholder="2026 undersouthern"></div>
                    <div class="form-group"><label>℗ copyright holder</label><input type="text" placeholder="2026 undersouthern"></div>

                    <div class="form-group full-width tracks-section">
                        <label id="audio-label">audio tracks management</label>
                        <div id="tracks-container"></div>
                        <button type="button" id="add-track-btn" class="btn-add-track" onclick="addTrackRow()">+ add track</button>
                    </div>
                </div>
                
                <div class="submit-container">
                    <button type="submit" class="btn-submit">submit</button>
                </div>
            </form>
        </main>

        <div class="bottom-bar">
            <span>© 2026 undersouthern. all rights reserved.</span>
            <span>label portal system v1.0</span>
        </div>
    </div>

    <div class="lyrics-modal-overlay" id="lyrics-modal" onclick="closeLyricsModal(event)">
        <div class="lyrics-modal-box" onclick="event.stopPropagation()">
            <h3 id="lyrics-track-name" style="font-size: 0.9rem; font-weight: 500; margin-top: 0;">track lyrics</h3>
            <textarea id="modal-textarea" placeholder="paste lyrics here..."></textarea>
            <button class="btn-done-lyrics" onclick="saveAndCloseLyrics()">done</button>
        </div>
    </div>

    <script>
        const genres = ["Alternative", "Alternative Rock", "Alternativo & Rock Latino", "Anime", "Baladas y Boleros", "Big Band", "Blues", "Brazilian", "C-Pop", "Cantopop/HK-Pop", "Children's", "Chinese", "Christian", "Classical", "Comedy", "Contemporary Latin", "Country", "Dance", "Easy Listening", "Educational", "Electronic", "Enka", "Experimental", "Fitness & Workout", "Folk", "French Pop", "German Folk", "German Pop", "Hip-Hop/Rap", "Holiday", "Indo Pop", "Inspirational", "Instrumental", "J-Pop", "Jazz", "K-Pop", "Karaoke", "Kayokyoku", "Latin", "Latin Jazz", "Metal", "New Age", "Opera", "Original Pilipino Music", "Pop", "Pop Latino", "Punk", "R&B", "Raices", "Reggae", "Reggaeton y Hip-Hop", "Regional Mexicano", "Rock", "Salsa y Tropical", "Singer/Songwriter", "Soul", "Soundtrack", "Spoken Word", "Tai-Pop", "Thai Pop", "Trot", "Vocal/Nostalgia", "World"];
        const languages = ["Vietnamese (VI)", "English (EN)", "Korean (KO)", "Japanese (JA)", "Chinese (ZH)", "French (FR)", "Spanish (ES)", "German (DE)", "Italian (IT)", "Portuguese (PT)", "Russian (RU)", "Arabic (AR)", "Hindi (HI)", "Thai (TH)", "Indonesian (ID)", "Bengali (BN)", "Turkish (TR)", "Malay (MS)", "Urdu (UR)", "Persian (FA)", "Swahili (SW)", "Tamil (TA)", "Telugu (TE)", "Marathi (MR)", "Gujarati (GU)", "Kannada (KN)", "Punjabi (PA)", "Filipino (TL)", "Malayalam (ML)", "Sinhala (SI)", "Burmese (MY)", "Khmer (KM)", "Lao (LO)", "Nepali (NE)", "Pashto (PS)", "Hebrew (HE)", "Greek (EL)", "Dutch (NL)", "Swedish (SV)", "Norwegian (NO)", "Danish (DA)", "Finnish (FI)", "Polish (PL)", "Czech (CS)", "Hungarian (HU)", "Romanian (RO)", "Bulgarian (BG)", "Serbian (SR)", "Croatian (HR)", "Slovak (SK)"];

        function populateDropdowns() {
            const pG = document.getElementById('primary-genre');
            const sG = document.getElementById('secondary-genre');
            const lS = document.getElementById('language-select');
            genres.forEach(g => { pG.add(new Option(g, g)); sG.add(new Option(g, g)); });
            languages.forEach(l => { lS.add(new Option(l, l)); });
        }

        function createTag(val, container, input) {
            const tag = document.createElement('div');
            tag.className = 'tag';
            tag.innerHTML = `${val} <span onclick="this.parentElement.remove()">✕</span>`;
            container.insertBefore(tag, input);
            input.value = '';
        }

        function initTagSystem(container) {
            const input = container.querySelector('input');
            input.addEventListener('keydown', (e) => { if (e.key === 'Enter') { e.preventDefault(); const val = input.value.trim(); if (val) createTag(val, container, input); } });
            input.addEventListener('blur', () => { const val = input.value.trim(); if (val) createTag(val, container, input); });
        }

        let trackCount = 0;
        let lyricsStore = {};
        let currentTrackLyricsId = null;

        function addTrackRow() {
            trackCount++;
            const container = document.getElementById('tracks-container');
            const itemContainer = document.createElement('div');
            itemContainer.className = 'track-item-container';
            itemContainer.id = `track-container-${trackCount}`;
            itemContainer.innerHTML = `
                <div class="track-number">${String(trackCount).padStart(2, '0')}</div>
                <div class="track-row">
                    <div class="form-group"><label>song title</label><input type="text" id="track-name-${trackCount}" required></div>
                    <div class="form-group"><label>primary artist</label><div class="tags-container"><input type="text" class="tag-input"></div></div>
                    <div class="form-group"><label>featured artist</label><div class="tags-container"><input type="text" class="tag-input"></div></div>
                    <div class="form-group"><label>producer</label><div class="tags-container"><input type="text" class="tag-input"></div></div>
                    <div class="action-mini-btn" id="audio-btn-${trackCount}" onclick="document.getElementById('file-${trackCount}').click()">
                        <i>♫</i><span id="file-status-${trackCount}">audio</span>
                        <input type="file" id="file-${trackCount}" hidden accept="audio/*" onchange="updateTrackStatus(${trackCount})">
                    </div>
                    <div class="action-mini-btn" id="lyrics-btn-${trackCount}" onclick="openLyricsModal(${trackCount})">
                        <i>✎</i><span id="lyrics-status-${trackCount}">lyrics</span>
                    </div>
                    <div style="cursor:pointer; color:#b3261e; font-size: 1.2rem; margin-left: 5px;" onclick="removeTrack(${trackCount})">✕</div>
                </div>`;
            container.appendChild(itemContainer);
            itemContainer.querySelectorAll('.tags-container').forEach(initTagSystem);
        }

        function removeTrack(id) { document.getElementById(`track-container-${id}`).remove(); reorderTracks(); }
        function reorderTracks() { const containers = document.querySelectorAll('.track-item-container'); let count = 0; containers.forEach((c) => { count++; c.querySelector('.track-number').innerText = String(count).padStart(2, '0'); }); trackCount = count; }
        function toggleTooltip(e, id) { e.stopPropagation(); document.querySelectorAll('.artwork-tooltip').forEach(tip => { if(tip.id !== id) tip.style.display = 'none'; }); const tip = document.getElementById(id); tip.style.display = (tip.style.display === 'block') ? 'none' : 'block'; }
        document.addEventListener('click', (e) => { document.querySelectorAll('.artwork-tooltip').forEach(tip => { if (!tip.contains(e.target) && !e.target.classList.contains('help-icon')) tip.style.display = 'none'; }); });

        function previewArt(input) { if (input.files && input.files[0]) { const reader = new FileReader(); reader.onload = (e) => { const p = document.getElementById('preview-img'); p.src = e.target.result; p.style.display = 'block'; }; reader.readAsDataURL(input.files[0]); } }
        function openLyricsModal(id) { currentTrackLyricsId = id; const trackName = document.getElementById(`track-name-${id}`).value || 'unnamed track'; document.getElementById('lyrics-track-name').innerText = `lyrics: ${trackName}`; document.getElementById('modal-textarea').value = lyricsStore[id] || ''; document.getElementById('lyrics-modal').style.display = 'flex'; }
        function saveAndCloseLyrics() { lyricsStore[currentTrackLyricsId] = document.getElementById('modal-textarea').value.trim(); const btn = document.getElementById(`lyrics-btn-${currentTrackLyricsId}`); const status = document.getElementById(`lyrics-status-${currentTrackLyricsId}`); if(lyricsStore[currentTrackLyricsId]) { status.innerText = "ready"; btn.classList.add('ready-state'); } else { status.innerText = "lyrics"; btn.classList.remove('ready-state'); } document.getElementById('lyrics-modal').style.display = 'none'; }
        function closeLyricsModal(e) { if(e.target.id === 'lyrics-modal') saveAndCloseLyrics(); }
        function updateTrackStatus(id) { document.getElementById(`file-status-${id}`).innerText = "ready"; document.getElementById(`audio-btn-${id}`).classList.add('ready-state'); }
        function handleTypeLogic() { const type = document.getElementById('release-type').value; document.getElementById('tracks-container').innerHTML = ""; trackCount = 0; addTrackRow(); document.getElementById('title-label').innerText = type + ' title'; }
        window.onload = () => { populateDropdowns(); handleTypeLogic(); };
    </script>
</body>
</html>
